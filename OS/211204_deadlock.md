<br>

https://myjamong.tistory.com/181


# 교착상태(deadlock)

두 개 이상의 작업이 서로 상대방의 작업이 끝나기 만을 기다리고 있기 때문에 결과적으로 아무것도 완료되지 못하는 상태 ([위키백과](https://ko.wikipedia.org/wiki/%EA%B5%90%EC%B0%A9_%EC%83%81%ED%83%9C))

즉, `둘 이상의 프로세스가 다른 프로세스가 점유하고 있는 자원을 서로 기다릴 때 무한 대기에 빠지는 상황`을 일컫는 말이다.

<br>

데드락(Deadlock)의 발생 조건은 크게 4가지가 있다.<br>
아래 조건 중 하나라도 만족하지 않으면 교착 상태는 발생하지 않는다.
1. 상호 배제(Mutual exclusion)
2. 점유 대기(Hold and wait)
3. 비선점(No preemption)
4. 순환 대기(Circular wait)

- 상호배제
한 번에 프로세스 하나만 해당 자원을 사용할 수 있다. 사용 중인 자원을 다른 프로세스가 사용하려면 요청한 자원이 해제될 때까지 기다려야 한다.

- 점유 대기
자원을 최소한 하나 보유하고, 다른 프로세스에 할당된 자원을 점유하기 위해 대기하는 프로세스가 존재해야 한다.

- 비선점
이미 할당된 자원을 강제로 빼앗을 수 없다(비선점)

- 순환 대기
대기 프로세스의 집합이 순환 형태로 자원을 대기하고 있어야 한다.

<br>

데드락의 예방(Deadlock Prevention)
데드락을 예방하기 위해서는 위에서 설명한 데드락의 발생 조건 4가지 중 하나라도 발생하지 않게 하면 된다. 즉, 각각의 조건을 방지하는 것이 데드락을 막는 방법이다.

1. 상호배제 조건의 제거
    - 한 번에 여러 프로세스가 공유 자원을 사용할 수 있게 한다. 그러나, 추후 동기화 관련 문제가 발생할 수 있습니다.
2. 점유와 대기 조건의 제거
    - 프로세스 실행에 필요한 모든 자원을 한꺼번에 요구하고 허용할 때까지 작업을 보류해서, 나중에 또다른 자원을 점유하기 위한 대기 조건을 성립하지 않도록 합니다.
3. 선점 조건의 제거
    - 이미 다른 프로세스에게 할당된 자원이 선점권이 없다고 가정할 때, 높은 우선순위의 프로세스가 해당 자원을 선점할 수 있도록 합니다.
4. 순환 대기 조건의 제거
    - 자원을 순환 형태로 대기하지 않도록 일정한 한 쪽 방향으로만 자원을 요구할 수 있도록 합니다.

이러한 교착 상태의 해결 방법들은 시스템의 처리량 또는 자원 사용성의 효율성을 떨어지고 비용이 많이 든다는 문제점이 있다.

이러한 단점을 조금 덜 제한적인 방법인 데드락 회피법으로 예방법의 단점을 일부 해결할 수 있다.

<br>

데드락 회피(Deadlock Avoidance)
교착 상태를 회피하기 위한 알고리즘이 크게 두 가지가 있다.

1. 자원 할당 그래프 알고리즘(Resource Allocation Graph Algorithm)
2. 은행원 알고리즘 (Banker's algorithm)
